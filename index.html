<!DOCTYPE html>
<html>
<head>
    <link href="css/styles.css"  rel="stylesheet"  type="text/css">
    <meta charset="utf-8" />
    <title>Poketri</title>
</head>
<body>
    <ul id="navbar">
      <li><a class="active" id="tri6" href="">Triage 6</a></li>
      <li><a class="" id="tri9" href="">Triage 9</a></li>
      <li><a class="active" id="2v2" href="">2V2</a></li>
  </ul>

  <div class="poketriage">
      <ul id="row-type-1" class="type">
        <li id="type1"></li>
        <li id="type2"></li>
        <li id="type3"></li>
    </ul>
    <ul id="row-type-2" class="type">
        <li id="type4"></li>
        <li id="type5"></li>
        <li id="type6"></li>
    </ul>   
    <ul id="row-type-3" class="type">
        <li id="type7"></li>
        <li id="type8"></li>
        <li id="type9"></li>
    </ul>
</div>

    <script src="https://poketri.vespera.ovh/jquery"></script>
    <script src="https://poketri.vespera.ovh/socket.io/socket.io.js"></script>
    <!--<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>-->
    <script>
    var socket = io.connect('http://vespera.ovh:1423');
    //var socket = io.connect('http://localhost:1423');


    $('#tri6').click(function () {
        clearMessage();
        socket.emit('message', 'tri6');     
        return false;
    });    
    $('#tri9').click(function () {
        clearMessage();
        socket.emit('message', 'tri9');     
        return false;
    });
    $('#2v2').click(function () {
        clearMessage();
        socket.emit('message', '2v2');     
        return false;
    });
    socket.on('message', function(data) {
        insereMessage(data);
    })

    function insereMessage(message) {
       console.log(message);
       setTimeout(function() { document.getElementById('type1').className = message[0]; }, 200); 
       setTimeout(function() { document.getElementById('type2').className = message[1]; }, 400); 
       setTimeout(function() { document.getElementById('type3').className = message[2]; }, 600); 
       setTimeout(function() { document.getElementById('type4').className = message[3]; }, 800); 
       setTimeout(function() { document.getElementById('type5').className = message[4]; }, 1000); 
       setTimeout(function() { document.getElementById('type6').className = message[5]; }, 1200); 
       setTimeout(function() { document.getElementById('type7').className = message[6]; }, 1400); 
       setTimeout(function() { document.getElementById('type8').className = message[7]; }, 1600); 
       setTimeout(function() { document.getElementById('type9').className = message[8]; }, 1800); 
   }

       function clearMessage() {
       document.getElementById('type1').className = '';
       document.getElementById('type2').className = '';
       document.getElementById('type3').className = '';
       document.getElementById('type4').className = '';
       document.getElementById('type5').className = '';
       document.getElementById('type6').className = '';
       document.getElementById('type7').className = '';
       document.getElementById('type8').className = '';
       document.getElementById('type9').className = '';
   }
   </script>
</body>
</html>
